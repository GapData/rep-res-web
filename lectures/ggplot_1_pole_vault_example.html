<!DOCTYPE html>
<html>
    <head>
    <title>ggplot2 - 1 &middot; Reproducible Research.</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="http://eriqande.github.io/rep-res-web/www/bootstrap.min.css" rel="stylesheet">
    <link href="http://eriqande.github.io/rep-res-web/www/highlight.css" rel="stylesheet">

    <link href='http://fonts.googleapis.com/css?family=Inconsolata:400,700'
      rel='stylesheet' type='text/css'>
  </head>

  <body>
    <div class="navbar navbar-default navbar-static-top">
 <div class="navbar-header"><a class="navbar-brand" href="http://eriqande.github.io/rep-res-web">RepResCourse</a>
      <a class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="http://eriqande.github.io/rep-res-web/syllabus.html">Syllabus</a></li>
        <li><a href="http://eriqande.github.io/rep-res-web/resources.html">Resources</a></li>
        <li><a href="http://eriqande.github.io/rep-res-web/blogs.html">Instructor Blog</a></li>
        <li><a href="#">Results/Gallery</a></li>
      </ul>
      <div class="navbar-right">
    	<p class="navbar-text">I'm navbar-fixed-top</p>
  	  </div>
    </div>
</div>


    <div class="container">
            <!-- The title and stuff is here -->
      <div class="masthead">
        <p> </p>
        <p> </p>
        <h3 class="muted"><a href="http://eriqande.github.io/rep-res-web/">Reproducible Research Course</a> <small>by Eric C. Anderson for (NOAA/SWFSC)</small></h3>
        <hr>
      </div>

      <div class="row">
        <div class="col-sm-3" id="nav">
          <div class="well">
  How's this site built? See all sources at the course <a href="http://github.com/eriqande/rep-res-course">repository</a> on GitHub.
  <p><hr></p>
  <p><a class="btn btn-primary" href="https://raw.githubusercontent.com/eriqande/rep-res-course/master/lectures/ggplot_1_pole_vault_example.rmd">Raw on GitHub</a></p>
</div>

<h4>Page Contents</h4>
<ul class="list-unstyled" id="toc"></ul>

<hr>
<p><a href="http://eriqande.github.io/rep-res-web/contribute.html">How to contribute</a></p>
<p><a class="btn btn-primary" href="https://github.com/eriqande/rep-res-course/edit/master/lectures/ggplot_1_pole_vault_example.rmd">Edit this page</a></p>


        </div>

        <div id="content" class="col-sm-8 pull-right">
          <h1 id="ggplot2-intro-lecture">Intro to ggplot2</h1>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lubridate)  <span class="co"># for dealing with dates</span>
<span class="kw">library</span>(ggplot2)
<span class="kw">library</span>(plyr)
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: &#39;plyr&#39;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; The following object is masked from &#39;package:lubridate&#39;:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     here</span>
<span class="co"># first off read the data into a data frame</span>
pv &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;data/mens_pole_vault_raw.txt&quot;</span>, 
                <span class="dt">comment.char =</span> <span class="st">&quot;%&quot;</span>, 
                <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, 
                <span class="dt">header =</span> <span class="ot">TRUE</span>, 
                <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>
                )

<span class="co"># and then clean it up:</span>
pv$Date &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">[[0-9]</span><span class="ch">\\</span><span class="st">]&quot;</span>, <span class="st">&quot;&quot;</span>, pv$Date)  <span class="co"># remove the footnote refs in the dates</span>
pv$Date &lt;-<span class="st"> </span><span class="kw">mdy</span>(pv$Date)  <span class="co"># convert dates to lubridate </span>
pv$Record &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">gsub</span>(<span class="st">&quot; m.*&quot;</span>, <span class="st">&quot;&quot;</span>, pv$Record))  <span class="co"># remove the &quot;m&quot; and other stuff from the heights</span>
<span class="kw">names</span>(pv)[<span class="kw">names</span>(pv) ==<span class="st"> &quot;Record&quot;</span>] =<span class="st"> &quot;Meters&quot;</span> <span class="co"># change &quot;Record&quot; column to &quot;Meters&quot;</span>

<span class="co"># now add a column for the date of first record for each athlete</span>
tmp &lt;-<span class="st"> </span><span class="kw">ddply</span>(<span class="dt">.data =</span> pv, <span class="dt">.variables =</span> <span class="st">&quot;Athlete&quot;</span>, <span class="dt">.fun =</span> function(pv) <span class="kw">min</span>(pv$Meters))
<span class="kw">rownames</span>(tmp) &lt;-<span class="st"> </span>tmp$Athlete
pv$FirstRecordMeters &lt;-<span class="st"> </span>tmp[pv$Athlete, <span class="st">&quot;V1&quot;</span>]

<span class="co"># now add a column for date of the next record:</span>
pv$DateNext &lt;-<span class="st"> </span><span class="kw">c</span>(pv$Date[-<span class="dv">1</span>], <span class="kw">ymd</span>(<span class="kw">today</span>()))

<span class="kw">ggplot</span>(<span class="dt">data =</span> pv, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Date, <span class="dt">y =</span> Meters, <span class="dt">color =</span> Nation))  +<span class="st"> </span>
<span class="st"> </span><span class="co"># geom_point() +</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> .<span class="dv">1</span>) +
<span class="st">  </span><span class="kw">geom_rect</span>(<span class="kw">aes</span>(<span class="dt">xmin =</span> Date, 
                <span class="dt">xmax =</span> DateNext, 
                <span class="dt">ymin =</span> FirstRecordMeters, 
                <span class="dt">ymax =</span> Meters,
                <span class="dt">fill =</span> Nation,
                <span class="dt">colour =</span> Nation
                ))</code></pre>
<p><img src="figures/unnamed-chunk-1.png" title="plot of chunk unnamed-chunk-1" alt="plot of chunk unnamed-chunk-1" width="384" /></p>

          <hr>
           <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'rep-res-course'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
        </div>
      </div>

            <div class="footer">
        <hr>
        <p>
          <small>
            Authored by Eric C. Anderson working as a Federal employee.  Content on this website is a government work in the public domain in the U.S. and under the CC0 1.0 internationally. Templates and plugins to build the site are modified from Hadley Wickham's <a href="https://github.com/hadley/adv-r/">Advanced R</a> website. Powered by <a href="http://jekyllrb.com/">jekyll</a>,
          <a href="http://yihui.name/knitr/">knitr</a>, and
          <a href="http://johnmacfarlane.net/pandoc/">pandoc</a>. Source
          available on <a href="https://github.com/eriqande/rep-res-course/">github</a>.
          </small>
        </p>
      </div>


    </div> <!-- /container -->

  <script src="//code.jquery.com/jquery.js"></script>
  <script src="http://eriqande.github.io/rep-res-web/www/bootstrap.min.js"></script>
  <script src="http://eriqande.github.io/rep-res-web/www/toc.js"></script>
  <script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  </body>
</html>

