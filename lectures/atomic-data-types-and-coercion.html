<!DOCTYPE html>
<html>
    <head>
    <title>R's Atomic Data Types and Vectorization &middot; Reproducible Research.</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="http://eriqande.github.io/rep-res-web/www/bootstrap.min.css" rel="stylesheet">
    <link href="http://eriqande.github.io/rep-res-web/www/highlight.css" rel="stylesheet">

    <link href='http://fonts.googleapis.com/css?family=Inconsolata:400,700'
      rel='stylesheet' type='text/css'>
  </head>

  <body>
    <div class="navbar navbar-default navbar-static-top">
 <div class="navbar-header"><a class="navbar-brand" href="http://eriqande.github.io/rep-res-web">RepResCourse</a>
      <a class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="http://eriqande.github.io/rep-res-web/syllabus.html">Syllabus</a></li>
        <li><a href="http://eriqande.github.io/rep-res-web/resources.html">Resources</a></li>
        <li><a href="http://eriqande.github.io/rep-res-web/blogs.html">Instructor Blog</a></li>
        <li><a href="#">Results/Gallery</a></li>
      </ul>
      <div class="navbar-right">
    	<p class="navbar-text">I'm navbar-fixed-top</p>
  	  </div>
    </div>
</div>


    <div class="container">
            <!-- The title and stuff is here -->
      <div class="masthead">
        <p> </p>
        <p> </p>
        <h3 class="muted"><a href="http://eriqande.github.io/rep-res-web/">Reproducible Research Course</a> <small>by Eric C. Anderson for (NOAA/SWFSC)</small></h3>
        <hr>
      </div>

      <div class="row">
        <div class="col-sm-3" id="nav">
          <div class="well">
  How's this site built? See all sources at the course <a href="http://github.com/eriqande/rep-res-course">repository</a> on GitHub.
  <p><hr></p>
  <p><a class="btn btn-primary" href="https://raw.githubusercontent.com/eriqande/rep-res-course/master/lectures/atomic-data-types-and-coercion.rmd">Raw on GitHub</a></p>
</div>

<h4>Page Contents</h4>
<ul class="list-unstyled" id="toc"></ul>

<hr>
<p><a href="http://eriqande.github.io/rep-res-web/contribute.html">How to contribute</a></p>
<p><a class="btn btn-primary" href="https://github.com/eriqande/rep-res-course/edit/master/lectures/atomic-data-types-and-coercion.rmd">Edit this page</a></p>


        </div>

        <div id="content" class="col-sm-8 pull-right">
          <h1 id="r-data-types-and-coercion">Atomic Data Types and Coercion</h1>

<h2 id="basic-modes">Basic Data “Modes” of R</h2>

<p>There are four main “modes” of scalar data, in order from least to most general:</p>

<ol style="list-style-type: decimal">
<li><code>logical</code> can take two values: <code>TRUE</code> and <code>FALSE</code>, which can be abbreviated, when you type them as <code>T</code> and <code>F</code>.</li>
<li>The <code>numeric</code> mode comes in two flavors: “integer” and “numeric” (real numbers). Examples: <code>1</code>, <code>3.14</code>, <code>8.2</code>, <code>10</code>, etc.</li>
<li><code>complex</code>: these are complex numbers of the form <span class="math"><em>a</em> + <em>b</em><em>i</em></span> where <span class="math"><em>a</em></span> and <span class="math"><em>b</em></span> are real numbers and <span class="math">$i=\sqrt{-1}.$</span> Examples: <code>3.2+7.3i</code>, <code>4+0i</code></li>
<li><code>character</code>: these take values that are often called “strings” in other languages. Examples: <code>&quot;fred&quot;</code>, <code>&quot;foo&quot;</code>, <code>&quot;bar&quot;</code>, <code>&quot;boing&quot;</code>. There is also a <code>raw</code> mode which refers to raw bytes of data, but we won’t concern ourselves with that for now.</li>
</ol>

<h3>Atomic Vectors</h3>

<p>A fundamental data structure in R: a vector in which every element is of the same mode. Like</p>

<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">7</span>)
x
<span class="co">#&gt; [1] 1 2 3 5 7</span></code></pre>

<p>Pretty basic stuff, until you start accidentally, or intentionally mixing modes.</p>

<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="st">&quot;11&quot;</span>)
x
<span class="co">#&gt; [1] &quot;1&quot;  &quot;2&quot;  &quot;3&quot;  &quot;5&quot;  &quot;7&quot;  &quot;11&quot;</span></code></pre>

<p>The mode of everything is <em>coerced</em> to the mode of the element with the most general mode, and this can really bite you in the rear if you don’t watch out!</p>

<h2 id="coercion">Coercion</h2>

<ul>
<li>All the data in an atomic vector <em>must be of the same mode</em></li>
<li>If data are added so that modes are mixed, then <em>the whole vector gets changed so that everything is of the most general mode</em></li>
<li><p>Example:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># simple atomic vector of mode numeric</span>
x &lt;-<span class="st"> </span><span class="dv">1</span>:<span class="dv">6</span>
x
<span class="co">#&gt; [1] 1 2 3 4 5 6</span>

<span class="co"># now change one to mode character and see what happens</span>
x[<span class="dv">1</span>] &lt;-<span class="st"> &quot;tweezer&quot;</span>
x
<span class="co">#&gt; [1] &quot;tweezer&quot; &quot;2&quot;       &quot;3&quot;       &quot;4&quot;       &quot;5&quot;       &quot;6&quot;</span></code></pre></li>
</ul>

<h3>Coercion Up One Step</h3>

<ul>
<li>logical to numeric:
<ul>
<li><code>TRUE</code> ==&gt; <code>1</code></li>
<li><code>FALSE</code> ==&gt; <code>0</code></li>
</ul></li>
<li>numeric to complex:
<ul>
<li><code>6.4</code> ==&gt; <code>6.4+0i</code></li>
<li><code>5</code> ==&gt; <code>5+0i</code></li>
</ul></li>
<li>complex to character:
<ul>
<li><code>6.4+0i</code> ==&gt; <code>&quot;6.4+0i&quot;</code></li>
</ul></li>
</ul>

<h3>Coercion Up Two Or More Steps</h3>

<p>Note that the coercion sometimes “jumps over the intermediate steps”</p>

<ul>
<li>logical to complex
<ul>
<li><code>TRUE</code> ==&gt; <code>1+0i</code></li>
<li><code>FALSE</code> ==&gt; <code>0+0i</code></li>
</ul></li>
<li>logical to character (it <em>does not</em> go FALSE ==&gt; 0 ==&gt; “0”)
<ul>
<li><code>TRUE</code> ==&gt; <code>&quot;TRUE&quot;</code></li>
<li><code>FALSE</code> ==&gt; <code>&quot;FALSE&quot;</code></li>
</ul></li>
<li>numeric to character
<ul>
<li><code>7</code> ==&gt; <code>&quot;7&quot;</code></li>
<li><code>3.1415</code> ==&gt; <code>&quot;3.1415&quot;</code></li>
</ul></li>
</ul>

<h3>Coercion down one step</h3>

<p>Sometimes things get coerced “downards” (i.e., toward less general data types).</p>

<p>If the coercion doesn’t make sense you end up with <code>NA</code> which is how R denotes missing data</p>

<ul>
<li>numeric to logical (0 ==&gt; FALSE, anything else ==&gt; TRUE); <em>Always “makes sense”</em>
<ul>
<li><code>0</code> ==&gt; <code>FALSE</code></li>
<li><code>1</code> ==&gt; <code>TRUE</code></li>
<li><code>78.2</code> ==&gt; <code>TRUE</code></li>
<li><code>0.0001</code> ==&gt; <code>TRUE</code></li>
<li><code>-563.3</code> ==&gt; <code>TRUE</code></li>
</ul></li>
<li>complex to numeric (discards complex part and warns about it!)
<ul>
<li><code>3.4+0i</code> ==&gt; <code>3.4</code></li>
<li><p><code>5.6+7.6i</code> ==&gt; <code>5.6</code> (+ a warning)</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># witness a warning:</span>
<span class="kw">as.numeric</span>(<span class="fl">7.4</span>+5i)
<span class="co">#&gt; Warning: imaginary parts discarded in coercion</span>
<span class="co">#&gt; [1] 7.4</span></code></pre></li>
</ul></li>
<li>character to complex
<ul>
<li><code>&quot;3.4+4i&quot;</code> ==&gt; <code>3.4+4i</code></li>
<li><code>&quot;a&quot;</code> -&gt; <code>NA</code> (you can’t coerce <code>&quot;a&quot;</code> to any number, reasonably)</li>
</ul></li>
</ul>

<h3>Coercion down more than one step</h3>

<p>Important point: it doesn’t <em>necessarily</em> go through intermediate steps:</p>

<ul>
<li>complex to logical (0 ==&gt;FALSE, anything else ==&gt; TRUE)
<ul>
<li><code>0+0i</code> ==&gt; <code>FALSE</code></li>
<li><code>0+2i</code> ==&gt; <code>TRUE</code></li>
<li><code>5+0i</code> ==&gt; <code>TRUE</code></li>
<li><code>5+9i</code> ==&gt; <code>TRUE</code></li>
</ul></li>
<li>character to logical
<ul>
<li><code>&quot;TRUE&quot;</code> ==&gt; <code>TRUE</code></li>
<li><code>&quot;FALSE&quot;</code> ==&gt; <code>FALSE</code></li>
<li><code>&quot;1&quot;</code> ==&gt; <code>NA</code> (<em>yikes! if it went through numeric you’d get something different!</em>)</li>
<li><code>&quot;0&quot;</code> ==&gt; <code>NA</code></li>
</ul></li>
<li>character to numeric
<ul>
<li><code>&quot;56.764&quot;</code> ==&gt; <code>56.764</code></li>
<li><code>&quot;4+8i&quot;</code> ==&gt; <code>4</code> (with a warning that the complex part was dropped)</li>
<li><code>&quot;fred&quot;</code> -&gt; <code>NA</code></li>
</ul></li>
</ul>

<h3>Functions For Explicit Coercion</h3>

<p>There is a whole family for coercing objects between different modes (or different types) that take the form <code>as.something</code>:</p>

<ul>
<li><code>as.logical(x)</code></li>
<li><code>as.numeric(x)</code></li>
<li><code>as.integer(x)</code> # not a mode, (this is a subclass of the <code>numeric</code> mode)</li>
<li><code>as.complex(x)</code></li>
<li><code>as.character(x)</code></li>
</ul>

<p>As expected, these are vectorized—they coerce every element of the vector to the desired mode.</p>

<h2 id="missing-data">Missing Data and Special Values in R</h2>

<p>We saw <code>NA</code> up above. That means “Not Available” and it denotes missing data.</p>

<p>There are also two more interesting values:</p>

<ol style="list-style-type: decimal">
<li><code>Inf</code> (-Inf) means <span class="math">∞</span> (or <span class="math"> − ∞</span>) and arises from things like: 1/0 or log(0).</li>
<li><code>NaN</code> means “Not a Number” and it arises from situations where you can’t evaluate something and it doesn’t have an obvious limit. Like 0/0 or Inf/-Inf or 0*Inf.</li>
</ol>

<ul>
<li>If you wish to test whether something is NaN, or NA you have: <code>is.na(x)</code> and <code>is.nan(x)</code> which return logical vectors.</li>
<li><p>The same goes for testing if things are finite or infinite:</p>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">NA</span>, <span class="dv">2</span>, <span class="ot">Inf</span>, <span class="dv">4</span>, <span class="ot">NaN</span>, <span class="dv">6</span>)

<span class="kw">is.nan</span>(x) <span class="co"># only the NaN</span>
<span class="co">#&gt; [1] FALSE FALSE FALSE FALSE  TRUE FALSE</span>

<span class="kw">is.na</span>(x) <span class="co"># both NA and NaN</span>
<span class="co">#&gt; [1]  TRUE FALSE FALSE FALSE  TRUE FALSE</span>

<span class="kw">is.infinite</span>(x) <span class="co"># only Inf or -Inf</span>
<span class="co">#&gt; [1] FALSE FALSE  TRUE FALSE FALSE FALSE</span></code></pre></li>
</ul>

<h3>Modes of Missing Data</h3>

<p>Here is something to be aware of: missing values, like non-missing values, carry around their mode. Try this:</p>

<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="ot">NA</span>, <span class="dv">4</span>, <span class="st">&quot;5&quot;</span>)
x
<span class="co">#&gt; [1] &quot;1&quot; &quot;2&quot; NA  &quot;4&quot; &quot;5&quot;</span>

x[<span class="dv">3</span>]  <span class="co"># this extracts the third element of x</span>
<span class="co">#&gt; [1] NA</span>

<span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>,x[<span class="dv">3</span>])
<span class="co">#&gt; [1] &quot;10&quot; &quot;20&quot; &quot;30&quot; NA</span>

<span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="ot">NA</span>)  <span class="co"># this is a &quot;fresh&quot; NA, no coercion</span>
<span class="co">#&gt; [1] 10 20 30 NA</span></code></pre>

<h2 id="vectorization">Vectorization</h2>

<ul>
<li>In R, the term <em>vectorization</em> refers to the fact that, in many cases, when you apply a function to a vector, it applies the function to every element of the vector.</li>
<li>This is apparent in many of the <em>operators</em> and we will see it in plenty of other functions, too.</li>
</ul>

<h3>Most Operators are Vectorized</h3>

<p>This is <em>incredibly important</em>! All the mathematical operators, like <code>+</code>, <code>-</code>, <code>*</code>, and the logical operators, like <code>&amp;</code> (AND), <code>|</code> (OR), and the comparison operators, like <code>&lt;</code> and <code>&gt;</code> are hungry to operate <em>element-wise</em> on every <em>element</em> of a vector. Example:</p>

<pre class="sourceCode r"><code class="sourceCode r">fish.lengths &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">121</span>, <span class="dv">95</span>, <span class="dv">87</span>, <span class="dv">142</span>)
fish.weights &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1011</span>, <span class="dv">505</span>, <span class="dv">702</span>, <span class="dv">900</span>)
fish.fatness &lt;-<span class="st"> </span>fish.weights /<span class="st"> </span>fish.lengths
fish.fatness
<span class="co">#&gt; [1] 8.355372 5.315789 8.068966 6.338028</span></code></pre>

<h3>Vectorization is so important…</h3>

<p>That we are going to go to open up a whole new lecture that starts with it.</p>

          <hr>
           <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'rep-res-course'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
        </div>
      </div>

            <div class="footer">
        <hr>
        <p>
          <small>
            Authored by Eric C. Anderson working as a Federal employee.  Content on this website is a government work in the public domain in the U.S. and under the CC0 1.0 internationally. Templates and plugins to build the site are modified from Hadley Wickham's <a href="https://github.com/hadley/adv-r/">Advanced R</a> website. Powered by <a href="http://jekyllrb.com/">jekyll</a>,
          <a href="http://yihui.name/knitr/">knitr</a>, and
          <a href="http://johnmacfarlane.net/pandoc/">pandoc</a>. Source
          available on <a href="https://github.com/eriqande/rep-res-course/">github</a>.
          </small>
        </p>
      </div>


    </div> <!-- /container -->

  <script src="//code.jquery.com/jquery.js"></script>
  <script src="http://eriqande.github.io/rep-res-web/www/bootstrap.min.js"></script>
  <script src="http://eriqande.github.io/rep-res-web/www/toc.js"></script>
  <script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  </body>
</html>

